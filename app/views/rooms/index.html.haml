.container-fluid
  .row
    =render "administration/side_menu"
    .col-sm-9.col-md-10.main
      %h1 Room manager
      - flash.each do |name, msg|
        .alert.alert-success
          = msg
      %table.table
        %tbody
          - current_floor = 0
          - @rooms.each do |room|
            - if room.floor > current_floor
              - current_floor = room.floor
              %tr
                %th{:colspan => 4}
                  = "Floor #{room.floor}"
            %td.card
              .panel.panel-default
                .panel-heading
                  %h3
                    = "Room #{room.number}"
                    %div{ :class => "status " + set_status_class(room)}
                      %span.glyphicon.glyphicon-ok-circle
                      %p
                        = room.status
                .panel-body
                  %h4
                    = "Type: #{room.room_type.title}"
                  %h4
                    = "View: #{room.room_view.title}"
                  %hr
                  %p
                    = "Capacity #{room.capacity} persons"
                  %hr
                    .room-pricing-container
                      %h4
                        - if get_room_pricing(room).length == 0
                          = link_to "No rate is associate", room_path(room), :class => "red"

                        - else
                          - get_room_pricing(room).each do |room_pricing|
                            = link_to room_pricing.title, room_pricing_path(room_pricing)
                            %br

                  %h4 Current prices
                .panel-footer
                  = link_to "Details", room_path(room), :class => "btn btn-default btn-sm btn-block"